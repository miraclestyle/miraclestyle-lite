<!DOCTYPE html>
<html ng-app="MainApp">
  <head>
    <title ng-bind="pageTitle"></title>
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <base href="/" />
    <meta name="fragment" content="!" />
    {% for style in settings.CSS_PATHS %}
    <link rel="stylesheet" type="text/css" href="{{static_dir('%s' % style)}}"/>
    {% endfor %}
 
    {% for js in settings.JS_PATHS %}
    <script type="text/javascript" src="{{static_dir('%s' % js)}}"></script>
    {% endfor %}
    
    <!-- angular globals -->
    {% for g in ['app', 'services', 'controllers', 'directives', 'filters'] %}
    <script type="text/javascript" src="{{static_dir('%s.js' % g)}}"></script>
    {% endfor %}
  
    {% for module in settings.ANGULAR_ACTIVE_COMPONENTS %}
    <script type="text/javascript" src="{{static_dir('components/%s.js' % module)}}"></script>
    {% endfor %}
    
    <script type="text/javascript" src="{{static_dir('routes.js')}}"></script>
    

  </head>
  <body>
    <div id="top-bar">
        <a ng-click="toggleMainMenu()" class="logo-link" href="javascript:;"><h1 id="logo">Miraclestyle</h1></a>
    </div>
    <div style="display:none;" id="main-menu">
        <div class="menu-inner">
            <div ng-show="current_account._root_admin" ng-include="logic_template('misc/search_form.html')"></div>
            <h1 class="fieldset">Account</h1>
            <ul ng-show="!current_account._is_guest" class="menu clearfix">
                <li><button type="button" class="button block" ng-click="manageAccount()">Settings</button></li>
                <li><button type="button" class="button block" ng-click="doLogout()">Logout</button></li>
            </ul>
            
            <div ng-show="!current_account._is_guest">
                <h1 class="fieldset">Buy</h1>
                <ul ng-show="!current_account._is_guest" class="menu clearfix">
                    <li><button type="button" class="button block" ng-click="manageCollection()">My Collections</button></li>
                    <li><button type="button" class="button block" ng-click="toggleMainMenu(1)" class="button block" ui-sref="buy-shopping-carts">My Shopping Carts</button></li>
                    <li><button type="button" class="button block" ng-click="toggleMainMenu(1)" class="button block" ui-sref="buy-orders">My Orders</button></li>
                    <li><button type="button" class="button block" ng-click="manageBuyer()">Settings</button></li>
                </ul>
            </div>
            
            <ul ng-show="current_account._is_guest" class="menu clearfix">
                <li><button type="button" busy class="button block" ng-click="doLogin()">Login</button></li>
            </ul>
            
            <div ng-show="!current_account._is_guest">
                <h1 class="fieldset">Sell</h1>
                <ul class="menu clearfix">
                   <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="sell-catalogs">Catalogs</button></li>
                    <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="sell-shopping-carts">Shopping Carts</button></li>
                    <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="sell-orders">Orders</button></li>
                     <li><button type="button"
                            ng-click="manageSeller()" 
                            class="button block">Settings</button></li>
                </ul>
            </div>
            
            
            
            <div ng-show="current_account._root_admin">
                
                <h1 class="fieldset">Administration</h1>
                <ul class="menu clearfix">
                     <li ng-repeat="(kind_key, kind) in ADMIN_KINDS"><button type="button" ng-click="toggleMainMenu(1)"
                                ui-sref="admin_search({query: JSON.stringify({}), kind : kind_key})" 
                                ui-sref-active="active" class="button block" ng-bind="kind"></button></li>
                </ul>
            </div>
            
            <div ng-show="!current_account._is_guest">
                <h1 class="fieldset">Support</h1>
                <ul class="menu clearfix">
                   <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="about">About</button></li>
                    <li><button type="button"
                            ng-click="beginTour()" 
                            class="button block">Tour</button></li>
                    <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="terms">Privacy &amp; Terms</button></li>
                    <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="terms">Copyright &amp; Trademark</button></li>
                     <li><button type="button"
                            ng-click="toggleMainMenu(1)" 
                            class="button block" ui-sref="support">Support</button></li>
                </ul>
            </div>
            
            <br />
             
        </div>
         
    </div>
 
    <div class="content" ui-view></div>
  </body> 
</html>