<form method="post" target="_blank" name="container.main" action="https://www.sandbox.paypal.com/cgi-bin/webscr">
<div scroll-end="save" class="modal-body scrollable">
<div class="modal-body-inner">
    
<h2>Data to send to paypal</h2>
<div>
    <pre>{{theform|json}}</pre>
</div>
 

        
<div formlistener class="shoppingcart">
    
 
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="charset" value="utf-8" />
    
<input type="hidden" name="invoice" value="{{order.key}}" />

<input type="hidden" name="no_shipping" value="0">

<input type='hidden' name='business' value='{{order._payment_method.business}}' />
<input type='hidden' name='return' value='{{complete_path}}' />
<input type='hidden' name='cancel_return' value='{{cancel_path}}' />
<input type='hidden' name='notify_url' value='{{notify_url}}' />
<input type='hidden' name='rm' value='1' />
<input type='hidden' name='currency_code' value='{{order.currency.code}}' />
<input type="hidden" name="custom" value="{{order.key}}" />
 

<input type="hidden" name="address_override" value="1" />  
 
<input type='hidden' name='first_name' value='{{order.shipping_address.name}}' />
  
<input type='hidden' name='address1' value='{{order.shipping_address.street}}' />

<input ng-if="order.shipping_address.street2" type='hidden' name='address2' value='{{order.shipping_address.street2}}' />

<input type='hidden' name='city' value='{{order.shipping_address.city}}' />

<input ng-if="order.shipping_address.region_code == 'US'" type='hidden' name='state' value='{{order.shipping_address.region_code}}' />

<!--
<input ng-if="order.shipping_address.region_code != 'US'" type='hidden' name='state' value='{{order.shipping_address.region}}' />
-->
 
<input ng-if="order.shipping_address.postal_code" type='hidden' name='zip' value='{{order.shipping_address.postal_code}}' />
 
<input type="hidden" name="country" value="{{order.shipping_address.country_code}}" />
<input type='hidden' name='email' value='{{order.shipping_address.email}}' />
 
<input type="hidden" name="tax_cart" value="{{order.tax_amount}}" />

<div class="tabbed shopping-cart dialog-content-top" id="shoppingCart">
 
            <table class="table">
                      <thead>
                        <tr>
                          <th>Product</th>
                      
                          <th class="center">Quantity</th>
                          <th class="center">Unit of Measure</th>
                          <th class="center">Taxes</th>
                          <th class="center">Unit Price</th>
                          <th class="center">Discount (%)</th>
                          <th class="center">Subtotal</th>
                        </tr>
                      </thead>
                      <tbody>
                       
                        <tr ng-repeat="line in order._lines track by $index">
                          <td class="vmiddle">
                               
                              <div>{{line.name}} {{line.description}}</div>
                              
                              <input type="hidden" value="{{line.description}}" name="item_name_{{line.sequence}}" />
                              <input type="hidden" value="{{line.sequence}}" name="item_number_{{line.sequence}}" />
                              <input type="hidden" value="{{line.quantity}}" name="quantity_{{line.sequence}}" />
                              <input type="hidden" value="{{line.unit_price}}" name="amount_{{line.sequence}}" />
                              <input type="hidden" value="{{line.discount}}" name="discount_rate_{{line.sequence}}" />
                        
                          </td>
                
                          <td class="center">
                              <input ng-disabled="order.state != 'cart'" type="numeric" style="width:50px;" ng-model="line.quantity" />
                          </td>
                          
                          <td class="center">{{line.product_uom.name}}</td> 
                       
                          <td class="center">{{line.taxes|json}}</td>
                          <td class="center">{{line.unit_price}}</td>
                           
                          <td class="center">{{line.discount}}</td>
                          <td class="center">{{line.subtotal}}</td>
                        </tr>
               
                      
                      </tbody>
       </table>

</div>
       <div class="clearfix"></div>
</div>

</div>



</div>
<div class="modal-footer">
    
     <button ng-show="order.state != 'checkout'" ng-click="checkout()" type="button" class="button">
        Checkout
    </button>
    
    <button ng-show="order.state != 'checkout'" ng-click="update()" type="button" class="button">
        Update
    </button>
    
    <button ng-show="order.state == 'checkout'" type="submit" class="button">
        Pay
    </button>
    
    <button type="button" class="button" ng-click="cancel()">
        Close
    </button>
</div>
</form>