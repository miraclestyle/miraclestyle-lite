<form action="{{form_info.action}}" ng-upload="completed(content)" name="container.main">
	
<input type="hidden" name="action_id" value="product_upload_images" />
<input type="hidden" name="action_model" value="31" />
<input type="hidden" name="key" value="{{child.parent.key}}" />
<input type="hidden" name="product" value="{{child.key}}" />
<input type="hidden" name="read_arguments" value="{&quot;_products&quot; : {&quot;config&quot; : {&quot;keys&quot; : [&quot;{{child.key}}&quot;]}}}" />
	
<div scroll-end class="modal-body scrollable">
<div class="modal-body-inner">
 
<div accordion>
   <div is-open="accordions.general" accordion-group heading="General">
   
    	<div class="form-control">
    	
    	<label class="form-label">Category</label>
		<div class="form-input">
			<div class="form-text">

				<input
			       name="product_category" 
			       ng-required="rule.input[action]._products.modelclass.product_category.required"
			       ng-disabled="!rule.field._products.product_category.writable"
			       ui-select2="commonSelect2Options.product_category"
			       ng-model="child.product_category"
			       data-placeholder="Select a product category" />
			</div>
		</div>
		</div>
		
		
    	<div class="form-control">
		<label class="form-label">Name</label>
		<div class="form-input">
			<div class="form-text">
				 <input name="name" 
				 		ng-required="rule.input[action]._products.modelclass.name.required"
				 	    class="text-input" type="text" ng-model="child.name"
				 	    ng-disabled="!rule.field._products.name.writable" />
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Default Unit of Measure</label>
		<div class="form-input">
			<div class="form-text">
				
				 <input
			       name="product_uom" 
			       ng-required="rule.input[action]._products.modelclass.product_uom.required"
			       ng-disabled="!rule.field._products.product_uom.writable"
			       ui-select2="commonSelect2Options.units"
			       ng-model="child.product_uom"
			       data-placeholder="Select a product unit of measure" />
			 
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Unit Price</label>
		<div class="form-input">
			<div class="form-text">
				 <input name="unit_price" 
				 		ng-required="rule.input[action]._products.modelclass.unit_price.required"
				 	    class="text-input" type="text" ng-model="child.unit_price"
				 	    ng-disabled="!rule.field._products.unit_price.writable" />
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Description</label>
		<div class="form-input">
			<div class="form-text">
				 <textarea ng-required="rule.input[action]._products.modelclass.description.required"
				 		   class="text-input text-textarea" ng-model="child.description" name="description"
				 		   ng-disabled="!rule.field._products.description.writable"></textarea>
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Weight</label>
		<div class="form-input">
			<div class="form-text">
				<table class="table3">
				 	<tbody>
				 		<tr>
				 			<td class="t60 cpr10"><input name="weight" 
											 		ng-required="rule.input[action]._products.modelclass.weight.required"
											 	    class="text-input" type="text" ng-model="child.weight"
											 	    ng-disabled="!rule.field._products.weight.writable" /></td>
				 			<td class="t40 cpl10">
			 
								<input
							       name="weight_uom" 
							       ng-required="rule.input[action]._products.modelclass.weight_uom.required"
							       ng-disabled="!rule.field._products.weight_uom.writable"
							       ui-select2="commonSelect2Options.weight"
							       ng-model="child.weight_uom"
							       data-placeholder="Select a weight unit of measure" />								 
				 			</td>
				 		</tr>
				 	</tbody>
				 </table>
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Volume</label>
		<div class="form-input">
			<div class="form-text">
				 <table class="table3">
				 	<tbody>
				 		<tr>
				 			<td class="t60 cpr10"><input name="volume" 
											 		ng-required="rule.input[action]._products.modelclass.volume.required"
											 	    class="text-input" type="text" ng-model="child.volume"
											 	    ng-disabled="!rule.field._products.volume.writable" /></td>
				 			<td class="t40 cpl10">
				 	 
								<input
							       name="volume_uom" 
							       ng-required="rule.input[action]._products.modelclass.volume_uom.required"
							       ng-disabled="!rule.field._products.volume_uom.writable"
							       ui-select2="commonSelect2Options.volume"
							       ng-model="child.volume_uom"
							       data-placeholder="Select a volume unit of measure" />									 
								 
				 			</td>
				 		</tr>
				 	</tbody>
				 </table>
			</div>
		</div>
		</div>
  
		<div class="form-control">
		<label class="form-label">Code</label>
		<div class="form-input">
			<div class="form-text">
				 <input name="code" 
				 		ng-required="rule.input[action]._products.modelclass.code.required"
				 	    class="text-input" type="text" ng-model="child.code"
				 	    ng-disabled="!rule.field._products.code.writable" />
			</div>
		</div>
		</div>
		
		<div class="form-control">
		<label class="form-label">Availability</label>
		<div class="form-input">
			<div class="form-text">
   
			   <select name="availability" ng-required="rule.input[action]._products.modelclass.availability.required"
					    ng-disabled="!rule.field._products.availability.writable" ui-select2 
					    ng-model="child.availability" data-placeholder="Select availability">
				    <option value=""></option>
				    <option ng-repeat="choice in rule.input[action]._products.modelclass.availability.choices track by $index" value="{{choice}}">{{choice}}</option>
				</select>
				
			</div>
		</div>
		</div>
 
		
		<div ng-show="child.id">
			<h2 class="fieldset with-button">
				<span class="fieldset-text">Variants</span>
				<span class="fieldset-button">
					<button ng-show="rule.field._products.variants.writable" ng-click="manageVariant()" type="button" class="button">Add Variant</button>
				</span>
			</h2>
	 
			<table class="table">
				<thead>
					<tr>
						<th>Name</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="variant in child.variants track by $index" ng-hide="variant._state == 'deleted'">
						<td>{{variant.name}}</td>
						<td>
							<span ng-show="rule.field._products.variants.writable">
							<button type="button" ng-click="removeVariant(variant)" class="button">Remove</button>
							<button type="button" ng-click="manageVariant(variant)" class="button">Edit</button>
							</span>
						</td>
					</tr>
				</tbody>
			</table>
			
		</div>
		<div ng-show="child.id">
			<h2 class="fieldset with-button">
				<span class="fieldset-text">Images</span>
				<span class="fieldset-button">
					 <div ng-show="rule.action.product_upload_images.executable" class="button fake-button">
					  	 <span>Add Images</span>
					  	 <input class="upload" name="images" multiple upload-on-select="uploadConfig" type="file" ng-model="child._supplied_filename" />
					 </div>
				</span>
			</h2>
			
			<div ng-show="$isUploading">Images are uploading... please wait...</div>
			
			<div ui-sortable="sortableOptions" ng-model="child.images" class="clearfix grid-wrapper">
				<div ng-repeat="image in child.images track by $index" ng-hide="image._state == 'deleted'" uploaded-image-grid="gridConfig" class="image-image grid-item">
					<div class="img spaceout">
						<img ng-src="{{image.serving_url}}=s360" />
					</div>
					<button ng-show="rule.field._products.images.writable" type="button" class="button" ng-click="removeImage(image)">Remove</button>
				</div>
			</div>
		</div>
		
		<div ng-show="child.id">
			<h2 class="fieldset with-button">
				<span class="fieldset-text">Contents</span>
				<span class="fieldset-button">
					<button ng-show="rule.field._products.contents.writable" ng-click="manageContent()" type="button" class="button">Add Content</button>
				</span>
			</h2>
			
			<table class="table">
				<thead>
					<tr>
						<th>Name</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="content in child.contents track by $index" ng-hide="content._state == 'deleted'">
						<td>{{content.title}}</td>
						<td>
							<span ng-show="rule.field._products.contents.writable">
							<button type="button" ng-click="removeContent(content)" class="button">Remove</button>
							<button type="button" ng-click="manageContent(content)" class="button">Edit</button>
							</span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		 
	</div>
 
 
	<div ng-show="child.id" is-open="accordions.instances" accordion-group heading="Product Instances">
		 
		 <div class="clearfix">
			<div class="pull-right">
				<button ng-show="rule.field._products._instances.writable" ng-click="newInstance()" type="button" class="button">Add Product Instance</button>
			</div>
		</div>
		
		<table class="table">
			<thead>
				<tr>
					<th>Code</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="instance in child._instances track by $index" ng-hide="instance._state == 'deleted'">
					<td>{{instance.code}}</td>
					<td>
						<span ng-show="rule.field._products._instances.writable">
						<button type="button" ng-click="removeInstance(instance)" class="button">Remove</button>
						<button type="button" ng-click="manageInstance(instance)" class="button">Edit</button>
						</span>
					</td>
				</tr>
			</tbody>
		</table>
		 
		<div ng-show="entity._next_read_arguments._products._instances.config.more">
			<button type="button" ng-click="getMoreProductInstances()" busy class="button">Load more product instances</button>
		</div>
		
		
	</div>
	
	
	 
</div>

 
 
</div>
</div>



<div class="modal-footer">
 
    <button ng-disabled="$isUploading" type="button" 
    		ng-click="can_delete(cancel)" ng-show="can_delete != undefined" busy class="button">
		Remove
	</button>
	
	<button ng-disabled="$isUploading" type="button" 
    		ng-click="duplicate()" ng-show="child.id && rule.action.product_duplicate.executable" busy class="button">
		Duplicate
	</button>
 
	<button type="button"
			ng-click="save()" 
			ng-show="rule.action.update.executable || rule.action.create.executable" 
			ng-disabled="container.main.$invalid || $isUploading" busy class="button">
		Save
	</button>
	<!-- ng-disabled="" does not work well with busy directive -->
	
	<button type="button" class="button" ng-click="cancel()">
		Cancel
	</button>
</div>


</form>