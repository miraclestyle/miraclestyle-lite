{# 

This file is only used to act as a compiler of html for the client. It has 0 backend logic to it.

It will perform linking static files and writing down all templates inside a file.

This was done for easier maintenance.

#}
<!DOCTYPE html>
<html>
  <head>
    <title ng-bind="pageTitle"></title>
    <meta id="is-landscape" />
    <meta id="is-mobile" />
    <meta id="is-tablet" />
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="fragment" content="!" />
    {% for style in settings.ANGULAR_CSS_PATHS %}
    <link rel="stylesheet" type="text/css" href="{{static_dir('%s' % style)}}"/>
    {% endfor %}


  </head>
  <body>
    <div id="top-bar">
        <a main-menu-toggler class="logo-link" href="javascript:;"><h1 id="logo">Miraclestyle</h1></a>
    </div>
    <div ng-controller="MainMenuCtrl" style="display:none;" id="main-menu">
        <div class="menu-inner">
            <div ng-show="currentAccount._root_admin" ng-include="misc/search_form.html"></div>

            <div>
                <h1 class="fieldset">Explore</h1>
                <ul class="menu clearfix">
                   <li ng-show="!currentAccount._is_guest"><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="collections">Collections</button></li>
                   <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="home">All</button></li>
                </ul>
            </div>
            
            <div ng-controller="BuyerManagementCtrl" ng-show="!currentAccount._is_guest">
                <h1 class="fieldset">Buy</h1>
                <ul ng-show="!currentAccount._is_guest" class="menu clearfix">
                    <li><button type="button" class="button block" ng-click="manageCollection()">Collections</button></li>
                    <li><button type="button" class="button block" main-menu-toggler class="button block" ui-sref="buy-carts">Carts</button></li>
                    <li><button type="button" class="button block" main-menu-toggler class="button block" ui-sref="buy-orders">Orders</button></li>
                    <li><button type="button" class="button block" ng-click="settings()">Settings</button></li>
                </ul>
            </div>
            
            <div ng-controller="SellerManagementCtrl" ng-show="!currentAccount._is_guest">
                <h1 class="fieldset">Sell</h1>
                <ul class="menu clearfix">
                   <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="sell-catalogs">Catalogs</button></li>
                    <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="sell-carts">Carts</button></li>
                    <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="sell-orders">Orders</button></li>
                     <li><button type="button"
                            class="button block" ng-click="settings()">Settings</button></li>
                </ul>
            </div>
            
            <h1 class="fieldset">Account</h1>
            <ul ng-controller="AccountManagementCtrl" ng-show="!currentAccount._is_guest" class="menu clearfix">
                <li><button type="button" class="button block" ng-click="logout()">Logout</button></li>
                <li><button type="button" class="button block" ng-click="settings()">Settings</button></li>
            </ul>
          
            <ul ng-controller="LoginLinksCtrl" ng-show="currentAccount._is_guest" class="menu clearfix">
                <li><button ng-click="login(1)" type="button" class="button block">Login with Google</button></li>
            </ul>
            <div ng-show="currentAccount._root_admin && GLOBAL_CONFIG.admin.menu">
                <h1 class="fieldset">Administration</h1>
                <ul class="menu clearfix">
                     <li ng-repeat="item in GLOBAL_CONFIG.admin.menu">
                         <button type="button" main-menu-toggler
                                ui-sref="admin-list({query: JSON.stringify({}), kind : item.kind})" 
                                ui-sref-active="active" class="button block" ng-bind="item.name"></button></li>
                </ul>
            </div>
            
            <div>
                <h1 class="fieldset">Support</h1>
                <ul class="menu clearfix">
                   <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="about">About</button></li>
                    <li><button type="button"
                            ng-click="beginTour()" 
                            class="button block">Tour</button></li>
                    <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="terms">Privacy &amp; Terms</button></li>
                    <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="trademark">Copyright &amp; Trademark</button></li>
                     <li><button type="button"
                            main-menu-toggler
                            class="button block" ui-sref="support">Support</button></li>
                </ul>
            </div>
            
            <br />
             
        </div>
         
    </div>
    <div class="content" ui-view></div>
    {# 
        Compile all templates based on the settings.py
    #}
    {% for tpl in settings.ANGULAR_TEMPLATES %}
    <script id="{{tpl[0]}}" type="{% if len(tpl) > 2 %}{{tpl[2]}}{% else %}text/ng-template{% endif %}">{% if not len(tpl) > 1 %}{{angular_include_template(tpl[0])|safe}}{% else %}{{angular_include_template(tpl[1])|safe}}{% endif %}</script>
    {% endfor %}
    
    
     
    {% for js in settings.ANGULAR_JS_PATHS %}
    <script type="text/javascript" src="{{static_dir('js/%s' % js)}}"></script>
    {% endfor %}
    
    <!-- angular globals -->
    {% for g in settings.ANGULAR_GLOBAL_JS_PATHS %}
    <script type="text/javascript" src="{{static_dir('js/%s.js' % g)}}"></script>
    {% endfor %}
  
    {% for module in settings.ANGULAR_ACTIVE_COMPONENTS %}
    <script type="text/javascript" src="{{static_dir('js/components/%s.js' % module)}}"></script>
    {% endfor %}
    
    <script type="text/javascript" src="{{static_dir('js/init.js')}}"></script>
    
  </body> 
</html>